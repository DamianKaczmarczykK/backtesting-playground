ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(b,y,H){var k=b("./lib/oop"),S=b("./lib/event_emitter").EventEmitter,L=b("./lib/lang"),w=b("./range").Range,T=b("./anchor").Anchor,x=b("./keyboard/hash_handler").HashHandler,M=b("./tokenizer").Tokenizer,R=w.comparePoints,r=function(){this.snippetMap={},this.snippetNameMap={}};(function(){k.implement(this,S),this.getTokenizer=function(){function t(e,s,n){return e=e.substr(1),/^\d+$/.test(e)&&!n.inFormatString?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function i(e){return"(?:[^\\\\"+e+"]|\\\\.)"}return r.$tokenizer=new M({start:[{regex:/:/,onMatch:function(e,s,n){return n.length&&n[0].expectIf?(n[0].expectIf=!1,n[0].elseBranch=n[0],[n[0]]):":"}},{regex:/\\./,onMatch:function(e,s,n){var a=e[1];return a=="}"&&n.length||"`$\\".indexOf(a)!=-1?e=a:n.inFormatString&&(a=="n"||a=="t"?e=`
`:"ulULE".indexOf(a)!=-1&&(e={changeCase:a,local:a>"a"})),[e]}},{regex:/}/,onMatch:function(e,s,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:t},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(e,s,n){var a=t(e.substr(1),s,n);return n.unshift(a[0]),a},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+i("\\|")+"*\\|",onMatch:function(e,s,n){n[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+i("/")+"+)/(?:("+i("/")+"*)/)(\\w*):?",onMatch:function(e,s,n){var a=n[0];return a.fmtString=e,e=this.splitRegex.exec(e),a.guard=e[1],a.fmt=e[2],a.flag=e[3],""},next:"start"},{regex:"`"+i("`")+"*`",onMatch:function(e,s,n){return n[0].code=e.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(e,s,n){n[0]&&(n[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+i("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,s,n){n.inFormatString=!0},next:"start"}]}),r.prototype.getTokenizer=function(){return r.$tokenizer},r.$tokenizer},this.tokenizeTmSnippet=function(t,i){return this.getTokenizer().getLineTokens(t,i).tokens.map(function(e){return e.value||e})},this.$getDefaultValue=function(t,i){if(/^[A-Z]\d+$/.test(i)){var e=i.substr(1);return(this.variables[i[0]+"__"]||{})[e]}if(/^\d+$/.test(i))return(this.variables.__||{})[i];if(i=i.replace(/^TM_/,""),!!t){var s=t.session;switch(i){case"CURRENT_WORD":var n=s.getWordRange();case"SELECTION":case"SELECTED_TEXT":return s.getTextRange(n);case"CURRENT_LINE":return s.getLine(t.getCursorPosition().row);case"PREV_LINE":return s.getLine(t.getCursorPosition().row-1);case"LINE_INDEX":return t.getCursorPosition().column;case"LINE_NUMBER":return t.getCursorPosition().row+1;case"SOFT_TABS":return s.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return s.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(t,i){return this.variables.hasOwnProperty(i)?this.variables[i](t,i)||"":this.$getDefaultValue(t,i)||""},this.tmStrFormat=function(t,i,e){var s=i.flag||"",n=i.guard;n=new RegExp(n,s.replace(/[^gi]/,""));var a=this.tokenizeTmSnippet(i.fmt,"formatString"),c=this,p=t.replace(n,function(){c.variables.__=arguments;for(var l=c.resolveVariables(a,e),d="E",g=0;g<l.length;g++){var v=l[g];if(typeof v=="object")if(l[g]="",v.changeCase&&v.local){var f=l[g+1];f&&typeof f=="string"&&(v.changeCase=="u"?l[g]=f[0].toUpperCase():l[g]=f[0].toLowerCase(),l[g+1]=f.substr(1))}else v.changeCase&&(d=v.changeCase);else d=="U"?l[g]=v.toUpperCase():d=="L"&&(l[g]=v.toLowerCase())}return l.join("")});return this.variables.__=null,p},this.resolveVariables=function(t,i){for(var e=[],s=0;s<t.length;s++){var n=t[s];if(typeof n=="string")e.push(n);else{if(typeof n!="object")continue;if(n.skip)c(n);else{if(n.processed<s)continue;if(n.text){var a=this.getVariableValue(i,n.text);a&&n.fmtString&&(a=this.tmStrFormat(a,n)),n.processed=s,n.expectIf==null?a&&(e.push(a),c(n)):a?n.skip=n.elseBranch:c(n)}else(n.tabstopId!=null||n.changeCase!=null)&&e.push(n)}}}function c(p){var l=t.indexOf(p,s+1);l!=-1&&(s=l)}return e},this.insertSnippetForSelection=function(t,i){var e=t.getCursorPosition(),s=t.session.getLine(e.row),n=t.session.getTabString(),a=s.match(/^\s*/)[0];e.column<a.length&&(a=a.slice(0,e.column)),i=i.replace(/\r/g,"");var c=this.tokenizeTmSnippet(i);c=this.resolveVariables(c,t),c=c.map(function(C){return C==`
`?C+a:typeof C=="string"?C.replace(/\t/g,n):C});var p=[];c.forEach(function(C,E){if(typeof C=="object"){var N=C.tabstopId,_=p[N];if(_||(_=p[N]=[],_.index=N,_.value=""),_.indexOf(C)===-1){_.push(C);var F=c.indexOf(C,E+1);if(F!==-1){var O=c.slice(E+1,F),j=O.some(function(K){return typeof K=="object"});j&&!_.value?_.value=O:O.length&&(!_.value||typeof _.value!="string")&&(_.value=O.join(""))}}}}),p.forEach(function(C){C.length=0});var l={};function d(C){for(var E=[],N=0;N<C.length;N++){var _=C[N];if(typeof _=="object"){if(l[_.tabstopId])continue;var F=C.lastIndexOf(_,N-1);_=E[F]||{tabstopId:_.tabstopId}}E[N]=_}return E}for(var g=0;g<c.length;g++){var v=c[g];if(typeof v=="object"){var f=v.tabstopId,$=c.indexOf(v,g+1);if(l[f]){l[f]===v&&(l[f]=null);continue}var A=p[f],P=typeof A.value=="string"?[A.value]:d(A.value);P.unshift(g+1,Math.max(0,$-g)),P.push(v),l[f]=v,c.splice.apply(c,P),A.indexOf(v)===-1&&A.push(v)}}var z=0,I=0,D="";c.forEach(function(C){if(typeof C=="string"){var E=C.split(`
`);E.length>1?(I=E[E.length-1].length,z+=E.length-1):I+=C.length,D+=C}else C.start?C.end={row:z,column:I}:C.start={row:z,column:I}});var B=t.getSelectionRange(),W=t.session.replace(B,D),V=new h(t),U=t.inVirtualSelectionMode&&t.selection.index;V.addTabstops(p,B.start,W,U)},this.insertSnippet=function(t,i){var e=this;if(t.inVirtualSelectionMode)return e.insertSnippetForSelection(t,i);t.forEachSelection(function(){e.insertSnippetForSelection(t,i)},null,{keepOrder:!0}),t.tabstopManager&&t.tabstopManager.tabNext()},this.$getScope=function(t){var i=t.session.$mode.$id||"";if(i=i.split("/").pop(),i==="html"||i==="php"){i==="php"&&!t.session.$mode.inlinePhp&&(i="html");var e=t.getCursorPosition(),s=t.session.getState(e.row);typeof s=="object"&&(s=s[0]),s.substring&&(s.substring(0,3)=="js-"?i="javascript":s.substring(0,4)=="css-"?i="css":s.substring(0,4)=="php-"&&(i="php"))}return i},this.getActiveScopes=function(t){var i=this.$getScope(t),e=[i],s=this.snippetMap;return s[i]&&s[i].includeScopes&&e.push.apply(e,s[i].includeScopes),e.push("_"),e},this.expandWithTab=function(t,i){var e=this,s=t.forEachSelection(function(){return e.expandSnippetForSelection(t,i)},null,{keepOrder:!0});return s&&t.tabstopManager&&t.tabstopManager.tabNext(),s},this.expandSnippetForSelection=function(t,i){var e=t.getCursorPosition(),s=t.session.getLine(e.row),n=s.substring(0,e.column),a=s.substr(e.column),c=this.snippetMap,p;return this.getActiveScopes(t).some(function(l){var d=c[l];return d&&(p=this.findMatchingSnippet(d,n,a)),!!p},this),p?(i&&i.dryRun||(t.session.doc.removeInLine(e.row,e.column-p.replaceBefore.length,e.column+p.replaceAfter.length),this.variables.M__=p.matchBefore,this.variables.T__=p.matchAfter,this.insertSnippetForSelection(t,p.content),this.variables.M__=this.variables.T__=null),!0):!1},this.findMatchingSnippet=function(t,i,e){for(var s=t.length;s--;){var n=t[s];if(!(n.startRe&&!n.startRe.test(i))&&!(n.endRe&&!n.endRe.test(e))&&!(!n.startRe&&!n.endRe))return n.matchBefore=n.startRe?n.startRe.exec(i):[""],n.matchAfter=n.endRe?n.endRe.exec(e):[""],n.replaceBefore=n.triggerRe?n.triggerRe.exec(i)[0]:"",n.replaceAfter=n.endTriggerRe?n.endTriggerRe.exec(e)[0]:"",n}},this.snippetMap={},this.snippetNameMap={},this.register=function(t,i){var e=this.snippetMap,s=this.snippetNameMap,n=this;t||(t=[]);function a(l){return l&&!/^\^?\(.*\)\$?$|^\\b$/.test(l)&&(l="(?:"+l+")"),l||""}function c(l,d,g){return l=a(l),d=a(d),l=d+l,l&&l[l.length-1]!="$"&&(l=l+"$"),new RegExp(l)}function p(l){l.scope||(l.scope=i||"_"),i=l.scope,e[i]||(e[i]=[],s[i]={});var d=s[i];if(l.name){var g=d[l.name];g&&n.unregister(g),d[l.name]=l}e[i].push(l),l.tabTrigger&&!l.trigger&&(!l.guard&&/^\w/.test(l.tabTrigger)&&(l.guard="\\b"),l.trigger=L.escapeRegExp(l.tabTrigger)),!(!l.trigger&&!l.guard&&!l.endTrigger&&!l.endGuard)&&(l.startRe=c(l.trigger,l.guard),l.triggerRe=new RegExp(l.trigger,"",!0),l.endRe=c(l.endTrigger,l.endGuard),l.endTriggerRe=new RegExp(l.endTrigger,"",!0))}t&&t.content?p(t):Array.isArray(t)&&t.forEach(p),this._signal("registerSnippets",{scope:i})},this.unregister=function(t,i){var e=this.snippetMap,s=this.snippetNameMap;function n(a){var c=s[a.scope||i];if(c&&c[a.name]){delete c[a.name];var p=e[a.scope||i],l=p&&p.indexOf(a);l>=0&&p.splice(l,1)}}t.content?n(t):Array.isArray(t)&&t.forEach(n)},this.parseSnippetFile=function(t){t=t.replace(/\r/g,"");for(var i=[],e={},s=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,n;n=s.exec(t);){if(n[1])try{e=JSON.parse(n[1]),i.push(e)}catch{}if(n[4])e.content=n[4].replace(/^\t/gm,""),i.push(e),e={};else{var a=n[2],c=n[3];if(a=="regex"){var p=/\/((?:[^\/\\]|\\.)*)|$/g;e.guard=p.exec(c)[1],e.trigger=p.exec(c)[1],e.endTrigger=p.exec(c)[1],e.endGuard=p.exec(c)[1]}else a=="snippet"?(e.tabTrigger=c.match(/^\S*/)[0],e.name||(e.name=c)):e[a]=c}}return i},this.getSnippetByName=function(t,i){var e=this.snippetNameMap,s;return this.getActiveScopes(i).some(function(n){var a=e[n];return a&&(s=a[t]),!!s},this),s}}).call(r.prototype);var h=function(t){if(t.tabstopManager)return t.tabstopManager;t.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=L.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(t)};(function(){this.attach=function(t){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=t,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(t){var i=t.action[0]=="r",e=t.start,s=t.end,n=e.row,a=s.row,c=a-n,p=s.column-e.column;if(i&&(c=-c,p=-p),!this.$inChange&&i){var l=this.selectedTabstop,d=l&&!l.some(function($){return R($.start,e)<=0&&R($.end,s)>=0});if(d)return this.detach()}for(var g=this.ranges,v=0;v<g.length;v++){var f=g[v];if(!(f.end.row<e.row)){if(i&&R(e,f.start)<0&&R(s,f.end)>0){this.removeRange(f),v--;continue}f.start.row==n&&f.start.column>e.column&&(f.start.column+=p),f.end.row==n&&f.end.column>=e.column&&(f.end.column+=p),f.start.row>=n&&(f.start.row+=c),f.end.row>=n&&(f.end.row+=c),R(f.start,f.end)>0&&this.removeRange(f)}}g.length||this.detach()},this.updateLinkedFields=function(){var t=this.selectedTabstop;if(!(!t||!t.hasLinkedRanges)){this.$inChange=!0;for(var i=this.editor.session,e=i.getTextRange(t.firstNonLinked),s=t.length;s--;){var n=t[s];if(n.linked){var a=y.snippetManager.tmStrFormat(e,n.original);i.replace(n,a)}}this.$inChange=!1}},this.onAfterExec=function(t){t.command&&!t.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var t=this.editor.selection.lead,i=this.editor.selection.anchor,e=this.editor.selection.isEmpty(),s=this.ranges.length;s--;)if(!this.ranges[s].linked){var n=this.ranges[s].contains(t.row,t.column),a=e||this.ranges[s].contains(i.row,i.column);if(n&&a)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(t){var i=this.tabstops.length,e=this.index+(t||1);e=Math.min(Math.max(e,1),i),e==i&&(e=0),this.selectTabstop(e),e===0&&this.detach()},this.selectTabstop=function(t){this.$openTabstops=null;var i=this.tabstops[this.index];if(i&&this.addTabstopMarkers(i),this.index=t,i=this.tabstops[this.index],!(!i||!i.length)){if(this.selectedTabstop=i,this.editor.inVirtualSelectionMode)this.editor.selection.setRange(i.firstNonLinked);else{var e=this.editor.multiSelect;e.toSingleRange(i.firstNonLinked.clone());for(var s=i.length;s--;)i.hasLinkedRanges&&i[s].linked||e.addRange(i[s].clone(),!0);e.ranges[0]&&e.addRange(e.ranges[0].clone())}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(t,i,e){if(this.$openTabstops||(this.$openTabstops=[]),!t[0]){var s=w.fromPoints(e,e);u(s.start,i),u(s.end,i),t[0]=[s],t[0].index=0}var n=this.index,a=[n+1,0],c=this.ranges;t.forEach(function(p,l){for(var d=this.$openTabstops[l]||p,g=p.length;g--;){var v=p[g],f=w.fromPoints(v.start,v.end||v.start);o(f.start,i),o(f.end,i),f.original=v,f.tabstop=d,c.push(f),d!=p?d.unshift(f):d[g]=f,v.fmtString?(f.linked=!0,d.hasLinkedRanges=!0):d.firstNonLinked||(d.firstNonLinked=f)}d.firstNonLinked||(d.hasLinkedRanges=!1),d===p&&(a.push(d),this.$openTabstops[l]=d),this.addTabstopMarkers(d)},this),a.length>2&&(this.tabstops.length&&a.push(a.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,a))},this.addTabstopMarkers=function(t){var i=this.editor.session;t.forEach(function(e){e.markerId||(e.markerId=i.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(t){var i=this.editor.session;t.forEach(function(e){i.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(t){var i=t.tabstop.indexOf(t);t.tabstop.splice(i,1),i=this.ranges.indexOf(t),this.ranges.splice(i,1),this.editor.session.removeMarker(t.markerId),t.tabstop.length||(i=this.tabstops.indexOf(t.tabstop),i!=-1&&this.tabstops.splice(i,1),this.tabstops.length||this.detach())},this.keyboardHandler=new x,this.keyboardHandler.bindKeys({Tab:function(t){y.snippetManager&&y.snippetManager.expandWithTab(t)||t.tabstopManager.tabNext(1)},"Shift-Tab":function(t){t.tabstopManager.tabNext(-1)},Esc:function(t){t.tabstopManager.detach()},Return:function(t){return!1}})}).call(h.prototype),T.prototype.onChange;var o=function(t,i){t.row==0&&(t.column+=i.column),t.row+=i.row},u=function(t,i){t.row==i.row&&(t.column-=i.column),t.row-=i.row};b("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),y.snippetManager=new r;var m=b("./editor").Editor;(function(){this.insertSnippet=function(t,i){return y.snippetManager.insertSnippet(this,t,i)},this.expandSnippet=function(t){return y.snippetManager.expandWithTab(this,t)}}).call(m.prototype)});ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(b,y,H){var k=b("../virtual_renderer").VirtualRenderer,S=b("../editor").Editor,L=b("../range").Range,w=b("../lib/event"),T=b("../lib/lang"),x=b("../lib/dom"),M=function(r){var h=new k(r);h.$maxLines=4;var o=new S(h);return o.setHighlightActiveLine(!1),o.setShowPrintMargin(!1),o.renderer.setShowGutter(!1),o.renderer.setHighlightGutterLine(!1),o.$mouseHandler.$focusWaitTimout=0,o.$highlightTagPending=!0,o},R=function(r){var h=x.createElement("div"),o=new M(h);r&&r.appendChild(h),h.style.display="none",o.renderer.content.style.cursor="default",o.renderer.setStyle("ace_autocomplete"),o.setOption("displayIndentGuides",!1),o.setOption("dragDelay",150);var u=function(){};o.focus=u,o.$isFocused=!0,o.renderer.$cursorLayer.restartTimer=u,o.renderer.$cursorLayer.element.style.opacity=0,o.renderer.$maxLines=8,o.renderer.$keepTextAreaAtCursor=!1,o.setHighlightActiveLine(!1),o.session.highlight(""),o.session.$searchHighlight.clazz="ace_highlight-marker",o.on("mousedown",function(a){var c=a.getDocumentPosition();o.selection.moveToPosition(c),i.start.row=i.end.row=c.row,a.stop()});var m,t=new L(-1,0,-1,1/0),i=new L(-1,0,-1,1/0);i.id=o.session.addMarker(i,"ace_active-line","fullLine"),o.setSelectOnHover=function(a){a?t.id&&(o.session.removeMarker(t.id),t.id=null):t.id=o.session.addMarker(t,"ace_line-hover","fullLine")},o.setSelectOnHover(!1),o.on("mousemove",function(a){if(!m){m=a;return}if(!(m.x==a.x&&m.y==a.y)){m=a,m.scrollTop=o.renderer.scrollTop;var c=m.getDocumentPosition().row;t.start.row!=c&&(t.id||o.setRow(c),s(c))}}),o.renderer.on("beforeRender",function(){if(m&&t.start.row!=-1){m.$pos=null;var a=m.getDocumentPosition().row;t.id||o.setRow(a),s(a,!0)}}),o.renderer.on("afterRender",function(){var a=o.getRow(),c=o.renderer.$textLayer,p=c.element.childNodes[a-c.config.firstRow];p!=c.selectedNode&&(c.selectedNode&&x.removeCssClass(c.selectedNode,"ace_selected"),c.selectedNode=p,p&&x.addCssClass(p,"ace_selected"))});var e=function(){s(-1)},s=function(a,c){a!==t.start.row&&(t.start.row=t.end.row=a,c||o.session._emit("changeBackMarker"),o._emit("changeHoverMarker"))};o.getHoveredRow=function(){return t.start.row},w.addListener(o.container,"mouseout",e),o.on("hide",e),o.on("changeSelection",e),o.session.doc.getLength=function(){return o.data.length},o.session.doc.getLine=function(a){var c=o.data[a];return typeof c=="string"?c:c&&c.value||""};var n=o.session.bgTokenizer;return n.$tokenizeRow=function(a){var c=o.data[a],p=[];if(!c)return p;typeof c=="string"&&(c={value:c}),c.caption||(c.caption=c.value||c.name);for(var l=-1,d,g,v=0;v<c.caption.length;v++)g=c.caption[v],d=c.matchMask&1<<v?1:0,l!==d?(p.push({type:c.className||(d?"completion-highlight":""),value:g}),l=d):p[p.length-1].value+=g;if(c.meta){var f=o.renderer.$size.scrollerWidth/o.renderer.layerConfig.characterWidth,$=c.meta;$.length+c.caption.length>f-2&&($=$.substr(0,f-c.caption.length-3)+"…"),p.push({type:"rightAlignedText",value:$})}return p},n.$updateOnChange=u,n.start=u,o.session.$computeWidth=function(){return this.screenWidth=0},o.$blockScrolling=1/0,o.isOpen=!1,o.isTopdown=!1,o.autoSelect=!0,o.data=[],o.setData=function(a){o.setValue(T.stringRepeat(`
`,a.length),-1),o.data=a||[],o.setRow(0)},o.getData=function(a){return o.data[a]},o.getRow=function(){return i.start.row},o.setRow=function(a){a=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,a)),i.start.row!=a&&(o.selection.clearSelection(),i.start.row=i.end.row=a||0,o.session._emit("changeBackMarker"),o.moveCursorTo(a||0,0),o.isOpen&&o._signal("select"))},o.on("changeSelection",function(){o.isOpen&&o.setRow(o.selection.lead.row),o.renderer.scrollCursorIntoView()}),o.hide=function(){this.container.style.display="none",this._signal("hide"),o.isOpen=!1},o.show=function(a,c,p){var l=this.container,d=window.innerHeight,g=window.innerWidth,v=this.renderer,f=v.$maxLines*c*1.4,$=a.top+this.$borderSize,A=$>d/2&&!p;A&&$+c+f>d?(v.$maxPixelHeight=$-2*this.$borderSize,l.style.top="",l.style.bottom=d-$+"px",o.isTopdown=!1):($+=c,v.$maxPixelHeight=d-$-.2*c,l.style.top=$+"px",l.style.bottom="",o.isTopdown=!0),l.style.display="",this.renderer.$textLayer.checkForSizeChanges();var P=a.left;P+l.offsetWidth>g&&(P=g-l.offsetWidth),l.style.left=P+"px",this._signal("show"),m=null,o.isOpen=!0},o.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},o.$imageSize=0,o.$borderSize=1,o};x.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),y.AcePopup=R});ace.define("ace/autocomplete/util",["require","exports","module"],function(b,y,H){y.parForEach=function(S,L,w){var T=0,x=S.length;x===0&&w();for(var M=0;M<x;M++)L(S[M],function(R,r){T++,T===x&&w(R,r)})};var k=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;y.retrievePrecedingIdentifier=function(S,L,w){w=w||k;for(var T=[],x=L-1;x>=0&&w.test(S[x]);x--)T.push(S[x]);return T.reverse().join("")},y.retrieveFollowingIdentifier=function(S,L,w){w=w||k;for(var T=[],x=L;x<S.length&&w.test(S[x]);x++)T.push(S[x]);return T},y.getCompletionPrefix=function(S){var L=S.getCursorPosition(),w=S.session.getLine(L.row),T;return S.completers.forEach(function(x){x.identifierRegexps&&x.identifierRegexps.forEach(function(M){!T&&M&&(T=this.retrievePrecedingIdentifier(w,L.column,M))}.bind(this))}.bind(this)),T||this.retrievePrecedingIdentifier(w,L.column)}});ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/snippets"],function(b,y,H){var k=b("./keyboard/hash_handler").HashHandler,S=b("./autocomplete/popup").AcePopup,L=b("./autocomplete/util");b("./lib/event");var w=b("./lib/lang"),T=b("./lib/dom"),x=b("./snippets").snippetManager,M=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new k,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=w.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=w.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new S(document.body||document.documentElement),this.popup.on("click",function(r){this.insertMatch(),r.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(r,h,o){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered),r.keyBinding.addKeyboardHandler(this.keyboardHandler);var u=r.renderer;if(this.popup.setRow(this.autoSelect?0:-1),o)o&&!h&&this.detach();else{this.popup.setTheme(r.getTheme()),this.popup.setFontSize(r.getFontSize());var m=u.layerConfig.lineHeight,t=u.$cursorLayer.getPixelPosition(this.base,!0);t.left-=this.popup.getTextLeftOffset();var i=r.container.getBoundingClientRect();t.top+=i.top-u.layerConfig.offset,t.left+=i.left-r.renderer.scrollLeft,t.left+=u.gutterWidth,this.popup.show(t,m)}},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(r){var h=this.editor.selection.lead;(h.row!=this.base.row||h.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(r){var h=document.activeElement,o=this.editor.textInput.getElement(),u=r.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(r.relatedTarget),m=this.popup&&this.popup.container;h!=o&&h.parentNode!=m&&!u&&h!=this.tooltipNode&&r.relatedTarget!=o&&this.detach()},this.mousedownListener=function(r){this.detach()},this.mousewheelListener=function(r){this.detach()},this.goTo=function(r){var h=this.popup.getRow(),o=this.popup.session.getLength()-1;switch(r){case"up":h=h<=0?o:h-1;break;case"down":h=h>=o?-1:h+1;break;case"start":h=0;break;case"end":h=o;break}this.popup.setRow(h)},this.insertMatch=function(r,h){if(r||(r=this.popup.getData(this.popup.getRow())),!r)return!1;if(r.completer&&r.completer.insertMatch)r.completer.insertMatch(this.editor,r);else{if(this.completions.filterText)for(var o=this.editor.selection.getAllRanges(),u=0,m;m=o[u];u++)m.start.column-=this.completions.filterText.length,this.editor.session.remove(m);r.snippet?x.insertSnippet(this.editor,r.snippet):this.editor.execCommand("insertstring",r.value||r)}this.detach()},this.commands={Up:function(r){r.completer.goTo("up")},Down:function(r){r.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(r){r.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(r){r.completer.goTo("end")},Esc:function(r){r.completer.detach()},Return:function(r){return r.completer.insertMatch()},"Shift-Return":function(r){r.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(r){var h=r.completer.insertMatch();if(!h&&!r.tabstopManager)r.completer.goTo("down");else return h},PageUp:function(r){r.completer.popup.gotoPageUp()},PageDown:function(r){r.completer.popup.gotoPageDown()}},this.gatherCompletions=function(r,h){var o=r.getSession(),u=r.getCursorPosition(),m=L.getCompletionPrefix(r);this.base=o.doc.createAnchor(u.row,u.column-m.length),this.base.$insertRight=!0;var t=[],i=r.completers.length;return r.completers.forEach(function(e,s){e.getCompletions(r,o,u,m,function(n,a){!n&&a&&(t=t.concat(a)),h(null,{prefix:L.getCompletionPrefix(r),matches:t,finished:--i===0})})}),!0},this.showPopup=function(r){this.editor&&this.detach(),this.activated=!0,this.editor=r,r.completer!=this&&(r.completer&&r.completer.detach(),r.completer=this),r.on("changeSelection",this.changeListener),r.on("blur",this.blurListener),r.on("mousedown",this.mousedownListener),r.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.updateCompletions=function(r){if(r&&this.base&&this.completions){var h=this.editor.getCursorPosition(),o=this.editor.session.getTextRange({start:this.base,end:h});if(o==this.completions.filterText)return;if(this.completions.setFilter(o),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==o&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,o,r);return}var u=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(m,t){var i=function(){if(t.finished)return this.detach()}.bind(this),e=t.prefix,s=t&&t.matches;if(!s||!s.length)return i();if(!(e.indexOf(t.prefix)!==0||u!=this.gatherCompletionsId)){this.completions=new R(s),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(e);var n=this.completions.filtered;if(!n.length||n.length==1&&n[0].value==e&&!n[0].snippet)return i();if(this.autoInsert&&n.length==1&&t.finished)return this.insertMatch(n[0]);this.openPopup(this.editor,e,r)}}.bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var r=this.popup,h=r.data,o=h&&(h[r.getHoveredRow()]||h[r.getRow()]),u=null;if(!o||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();if(this.editor.completers.some(function(m){return m.getDocTooltip&&(u=m.getDocTooltip(o)),u}),u||(u=o),typeof u=="string"&&(u={docText:u}),!u||!(u.docHTML||u.docText))return this.hideDocTooltip();this.showDocTooltip(u)},this.showDocTooltip=function(r){this.tooltipNode||(this.tooltipNode=T.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var h=this.tooltipNode;r.docHTML?h.innerHTML=r.docHTML:r.docText&&(h.textContent=r.docText),h.parentNode||document.body.appendChild(h);var o=this.popup,u=o.container.getBoundingClientRect();h.style.top=o.container.style.top,h.style.bottom=o.container.style.bottom,window.innerWidth-u.right<320?(h.style.right=window.innerWidth-u.left+"px",h.style.left=""):(h.style.left=u.right+1+"px",h.style.right=""),h.style.display="block"},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var r=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==r&&this.editor.focus(),this.tooltipNode=null,r.parentNode&&r.parentNode.removeChild(r)}},this.onTooltipClick=function(r){for(var h=r.target;h&&h!=this.tooltipNode;){if(h.nodeName=="A"&&h.href){h.rel="noreferrer",h.target="_blank";break}h=h.parentNode}}}).call(M.prototype),M.startCommand={name:"startAutocomplete",exec:function(r){r.completer||(r.completer=new M),r.completer.autoInsert=!1,r.completer.autoSelect=!0,r.completer.showPopup(r),r.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var R=function(r,h){this.all=r,this.filtered=r,this.filterText=h||"",this.exactMatch=!1};(function(){this.setFilter=function(r){if(r.length>this.filterText&&r.lastIndexOf(this.filterText,0)===0)var h=this.filtered;else var h=this.all;this.filterText=r,h=this.filterCompletions(h,this.filterText),h=h.sort(function(u,m){return m.exactMatch-u.exactMatch||m.score-u.score});var o=null;h=h.filter(function(u){var m=u.snippet||u.caption||u.value;return m===o?!1:(o=m,!0)}),this.filtered=h},this.filterCompletions=function(r,h){var o=[],u=h.toUpperCase(),m=h.toLowerCase();e:for(var t=0,i;i=r[t];t++){var e=i.value||i.caption||i.snippet;if(e){var s=-1,n=0,a=0,c,p;if(this.exactMatch){if(h!==e.substr(0,h.length))continue e}else for(var l=0;l<h.length;l++){var d=e.indexOf(m[l],s+1),g=e.indexOf(u[l],s+1);if(c=d>=0&&(g<0||d<g)?d:g,c<0)continue e;p=c-s-1,p>0&&(s===-1&&(a+=10),a+=p),n=n|1<<c,s=c}i.matchMask=n,i.exactMatch=a?0:1,i.score=(i.score||0)-a,o.push(i)}}return o}}).call(R.prototype),y.Autocomplete=M,y.FilteredList=R});ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(b,y,H){var k=b("../range").Range,S=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function L(T,x){var M=T.getTextRange(k.fromPoints({row:0,column:0},x));return M.split(S).length-1}function w(T,x){var M=L(T,x),R=T.getValue().split(S),r=Object.create(null),h=R[M];return R.forEach(function(o,u){if(!(!o||o===h)){var m=Math.abs(M-u),t=R.length-m;r[o]?r[o]=Math.max(t,r[o]):r[o]=t}}),r}y.getCompletions=function(T,x,M,R,r){var h=w(x,M),o=Object.keys(h);r(null,o.map(function(u){return{caption:u,value:u,score:h[u],meta:"local"}}))}});ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(b,y,H){var k=b("../snippets").snippetManager,S=b("../autocomplete").Autocomplete,L=b("../config"),w=b("../lib/lang"),T=b("../autocomplete/util"),x=b("../autocomplete/text_completer"),M={getCompletions:function(e,s,n,a,c){if(s.$mode.completer)return s.$mode.completer.getCompletions(e,s,n,a,c);var p=e.session.getState(n.row),l=s.$mode.getCompletions(p,s,n,a);c(null,l)}},R={getCompletions:function(e,s,n,a,c){var p=k.snippetMap,l=[];k.getActiveScopes(e).forEach(function(d){for(var g=p[d]||[],v=g.length;v--;){var f=g[v],$=f.name||f.tabTrigger;$&&l.push({caption:$,snippet:f.content,meta:f.tabTrigger&&!f.name?f.tabTrigger+"⇥ ":"snippet",type:"snippet"})}},this),c(null,l)},getDocTooltip:function(e){e.type=="snippet"&&!e.docHTML&&(e.docHTML=["<b>",w.escapeHTML(e.caption),"</b>","<hr></hr>",w.escapeHTML(e.snippet)].join(""))}},r=[R,x,M];y.setCompleters=function(e){r.length=0,e&&r.push.apply(r,e)},y.addCompleter=function(e){r.push(e)},y.textCompleter=x,y.keyWordCompleter=M,y.snippetCompleter=R;var h={name:"expandSnippet",exec:function(e){return k.expandWithTab(e)},bindKey:"Tab"},o=function(e,s){u(s.session.$mode)},u=function(e){var s=e.$id;k.files||(k.files={}),m(s),e.modes&&e.modes.forEach(u)},m=function(e){if(!(!e||k.files[e])){var s=e.replace("mode","snippets");k.files[e]={},L.loadModule(s,function(n){n&&(k.files[e]=n,!n.snippets&&n.snippetText&&(n.snippets=k.parseSnippetFile(n.snippetText)),k.register(n.snippets||[],n.scope),n.includeScopes&&(k.snippetMap[n.scope].includeScopes=n.includeScopes,n.includeScopes.forEach(function(a){m("ace/mode/"+a)})))})}},t=function(e){var s=e.editor,n=s.completer&&s.completer.activated;if(e.command.name==="backspace")n&&!T.getCompletionPrefix(s)&&s.completer.detach();else if(e.command.name==="insertstring"){var a=T.getCompletionPrefix(s);a&&!n&&(s.completer||(s.completer=new S),s.completer.autoInsert=!1,s.completer.showPopup(s))}},i=b("../editor").Editor;b("../config").defineOptions(i.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:r),this.commands.addCommand(S.startCommand)):this.commands.removeCommand(S.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:r),this.commands.on("afterExec",t)):this.commands.removeListener("afterExec",t)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(h),this.on("changeMode",o),o(null,this)):(this.commands.removeCommand(h),this.off("changeMode",o))},value:!1}})});(function(){ace.acequire(["ace/ext/language_tools"],function(){})})();
